<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Consultas Salvas</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css" />
  <style>
    body {
      font-family: 'Inter', sans-serif !important;
    }
  </style>
</head>

<!-- Painel lateral -->

<div id="painelDetalhesEmpresa" class="fixed top-0 right-0 w-[400px] max-w-full h-full bg-white shadow-lg border-l border-gray-200 transform translate-x-full transition-transform duration-300 z-50">
  
  <!-- CabeÃ§alho fixo -->
  <div class="flex justify-between items-center p-4 border-b border-gray-300">
    <h2 class="text-lg font-semibold">Detalhes da Empresa</h2>
    <button onclick="fecharPainelDetalhes()" class="text-gray-500 hover:text-black">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <!-- Corpo com rolagem -->
  <div class="p-4 space-y-4 overflow-y-auto h-[calc(100vh-64px)]"> <!-- 64px = altura aproximada do cabeÃ§alho -->
    <p><strong>RazÃ£o Social:</strong> <span id="painel-razao"></span></p>
    <p><strong>Nome fantasia:</strong> <span id="painel-nomeFantasia"></span></p>
    <p><strong>CNPJ:</strong> <span id="painel-cnpj"></span></p>
    <p><strong>Data FundaÃ§Ã£o:</strong> <span id="painel-fundacao"></span></p>
    <p><strong>Industria:</strong> <span id="painel-divisao"></span></p>
    <p><strong>Cnae principal:</strong> <span id="painel-cnae"></span></p>
    <p><strong>Site:</strong> <span id="painel-site"></span></p>
    <p><strong>Email:</strong> <span id="painel-email"></span></p>
    <p><strong>LinkedIn:</strong> <span id="painel-linkedin"></span></p>

    <div id="painel-funcionarios" class="pt-4 border-t">
      <div class="flex items-center justify-between mb-2">
        <h3 class="text-sm font-semibold">Pessoas Relacionadas</h3>
        <p id="info-busca-pessoas" class="text-xs text-gray-600"></p>
        <button id="btn-buscar-pessoas" 
          class="px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700">
          Buscar Pessoas
        </button>
      </div>
       <!-- SÃ³cios local-->
      <div id="painel-socios">
        <h4 class="text-sm font-medium text-gray-700 mb-1">SÃ³cios dados locais</h4>
        <div id="lista-socios-local" class="space-y-2 mb-4"></div>
      </div>

      <!-- Linha divisÃ³ria preta -->
      <hr class="border-t border-black my-4">

       <!-- SÃ³cios -->
      <div id="painel-socios">
        <h4 class="text-sm font-medium text-gray-700 mb-1">SÃ³cios</h4>
        <div id="lista-socios" class="space-y-2 mb-4"></div>
      </div>

      
      <!-- Linha divisÃ³ria preta -->
      <hr class="border-t border-black my-4">

      <!-- Empregados -->
      <div id="painel-empregados">
        <h4 class="text-sm font-medium text-gray-700 mb-1">Funcionarios</h4>
        <div id="lista-empregados" class="space-y-2"></div>
      </div>

      <!-- Linha divisÃ³ria preta -->
      <hr class="border-t border-black my-4">

      <!-- Simples Nacional -->
      <div id="painel-simples" class="pt-4 border-t">
        <h4 class="text-sm font-medium text-gray-700 mb-2">Simples Nacional</h4>
        <p><strong>OpÃ§Ã£o Simples:</strong> <span id="simples-opcao">â€”</span></p>
        <p><strong>Data OpÃ§Ã£o:</strong> <span id="simples-data-opcao">â€”</span></p>
        <p><strong>Data ExclusÃ£o:</strong> <span id="simples-data-exclusao">â€”</span></p>
        <p><strong>OpÃ§Ã£o MEI:</strong> <span id="simples-opcao-mei">â€”</span></p>
      </div>


      <div class="pt-4">
        <button onclick="abrirModalSalvarPessoas()"
          class="w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
          Salvar Pessoas Selecionadas
        </button>
      </div>
    </div>
  </div>
</div>



<body class="bg-gray-50 font-sans">

  <!-- Sidebar principal -->
  <aside
    class="group fixed left-0 top-0 z-30 h-screen w-16 hover:w-44 bg-white shadow-md transition-all duration-300 overflow-hidden p-6 flex flex-col"
  >
    <h2 class="text-2xl font-bold text-blue-600 mb-8 flex items-center whitespace-nowrap">
      <span>P</span><span class="ml-1 hidden group-hover:inline">-LEAD</span>
    </h2>

    <nav class="flex flex-col gap-4 text-gray-700">
      <a href="/template/index.html" class="flex items-center gap-3 hover:text-blue-600 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
        </svg>
        <span class="hidden group-hover:inline font-medium text-base">Filtro</span>
      </a>

      <a href="/template/lead.html" class="flex items-center gap-3 hover:text-blue-600 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5M3.75 9.75h16.5M3.75 14.25h16.5M3.75 18.75h16.5" />
        </svg>
        <span class="hidden group-hover:inline font-medium text-base">Leads</span>
      </a>

      <a href="/template/find.html" class="flex items-center gap-3 hover:text-blue-600 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 3.75H6A2.25 2.25 0 0 0 3.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0 1 20.25 6v1.5m0 9V18A2.25 2.25 0 0 1 18 20.25h-1.5m-9 0H6A2.25 2.25 0 0 1 3.75 18v-1.5M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
        </svg>
        <span class="hidden group-hover:inline font-medium text-base">Buscar Cnpj</span>
      </a>
    </nav>
  </aside>

  <!-- Sidebar lateral submenu fixa -->
  <aside
    class="fixed top-8 left-20 z-10 hidden md:flex flex-col w-64 bg-white rounded-lg shadow border border-gray-200 p-4 max-h-[calc(100vh-4rem)] overflow-y-auto"
    aria-label="Listas de Leads"
  >
    <strong class="text-blue-600 text-lg mb-4 block">Leads</strong>

    <!-- Empresas -->
    <section aria-labelledby="empresas-title" class="mb-6">
      <header>
        <h3 id="empresas-title" class="text-gray-700 font-semibold text-sm mb-2">
          Empresas (<span id="contador-leads">0</span>)
        </h3>
      </header>
      <ul id="submenuEmpresas" class="space-y-1 text-sm">
        <!-- Leads serÃ£o inseridas aqui -->
      </ul>
    </section>


    <!-- Pessoas -->
    <section aria-labelledby="pessoas-title">
      <header class="flex items-center justify-between">
        <h3 id="pessoas-title" class="text-gray-700 font-semibold text-sm mb-2">
          Pessoas (<span id="contador-leads-pessoas" class="text-gray-400">0</span>)
        </h3>
        <div class="flex gap-2">
          <button
            aria-label="Search in the lists"
            class="text-gray-400 hover:text-blue-600"
            type="button"
            onclick="document.getElementById('search-lists').classList.toggle('hidden')"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 1114.5 6a7.5 7.5 0 011.303 9.803z" />
            </svg>
          </button>
          <button
            aria-label="Create a new list"
            class="text-gray-400 hover:text-blue-600"
            type="button"
            onclick="document.getElementById('modal-create-leads-list').classList.remove('hidden')"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
            </svg>
          </button>
        </div>
      </header>
      <div id="search-lists" class="hidden mb-4">
        <label for="aside-list-search" class="block text-xs font-medium text-gray-600 mb-1">Buscar por nome</label>
        <input
          id="aside-list-search"
          type="search"
          placeholder="Procurar uma listaâ€¦"
          class="w-full rounded border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>
      <ul id="submenuPessoas" class="space-y-1 text-sm">
        <li>
          <a href="/leads" class="flex justify-between hover:text-blue-600 font-semibold" aria-current="page">
            <span>Todas as Pessoas</span>
            <span class="text-gray-400">0</span>
          </a>
        </li>
      </ul>
    </section>
  </aside>

  <!-- ConteÃºdo principal -->
  <main class="ml-[20rem] p-8">
    <h1 id="titulo-cinematico" class="text-3xl font-bold text-blue-600 mb-6">ðŸ“‹ Consultas Salvas</h1>

    <div id="header-lead-empresas" class="mb-0"></div>
    <div id="header-lead-pessoas" class="mb-0"></div>
    <div class="bg-white shadow-md rounded-lg p-6 overflow-x-auto">
      <div id="legenda-empresas" class="flex items-center gap-2 mb-4">
        <h2 class="text-xl font-semibold text-gray-800">Leads Salvas</h2>
        <div class="relative group">
          <svg xmlns="http://www.w3.org/2000/svg" class="size-5 text-gray-500 group-hover:text-blue-600 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
          </svg>
          <div class="absolute left-6 top-1 bg-gray-800 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10">
            Linhas verdes indicam empresas jÃ¡ salvas como lead pessoa.
          </div>  
        </div>
      </div>

      <!-- Aqui serÃ¡ inserido o cabeÃ§alho com nome da lead e botÃµes -->
      
      <table class="min-w-full bg-white">
        <thead id="resultado-head">
          <!-- O JS irÃ¡ preencher dinamicamente -->
        </thead>
        <tbody id="resultado-body" class="divide-y divide-gray-100">
          <!-- Dados carregados via JavaScript -->
        </tbody>
      </table>
    </div>  

    <!-- Modal -->
    <div id="modalEditarNome" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg w-80">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Editar Nome da Lista</h2>
            <input id="inputNovoNome" type="text" placeholder="Novo nome"
                class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <div class="flex justify-center gap-4">
                <button onclick="fecharModalEditarNome()" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
                <button onclick="confirmarEditarNome()" class="px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de ConfirmaÃ§Ã£o de ExclusÃ£o -->
    <div id="modalDeletarLead" class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg p-6 max-w-md w-full">
            <h2 class="text-lg font-semibold mb-4 text-gray-800">Excluir lista</h2>
            <p class="mb-6 text-gray-600">Tem certeza que deseja excluir a lista <span class="font-bold text-gray-900" id="nomeLeadParaDeletar"></span>?</p>
            <div class="flex justify-end gap-3">
                <button onclick="fecharModalDeletar()" class="px-4 py-2 text-gray-700 hover:text-black">Cancelar</button>
                <button onclick="confirmarDeletarLead()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Deletar</button>
            </div>
        </div>
    </div>

  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <script src="/static/lead.js"></script>


  <!-- Modal: Salvar Pessoas -->
<div id="modalSalvarPessoas" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
  <div class="bg-white p-6 rounded-lg shadow-lg w-96">
    <h2 class="text-lg font-semibold text-gray-800 mb-4">Salvar Pessoas Selecionadas</h2>
    
    <label for="listaExistente" class="text-sm text-gray-600">Salvar em lista existente ou criar nova:</label>
    <select id="listaExistente" onchange="onSelecionarListaPessoasExistente()"
      class="w-full px-4 py-2 border border-gray-300 rounded-md mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      <option value="">-- Criar nova lista --</option>
    </select>

    <input id="nomeListaPessoas" type="text" placeholder="Nome da nova lista"
      class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">

    <div class="flex justify-end gap-4">
      <button onclick="fecharModalSalvarPessoas()" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
        Cancelar
      </button>
      <button onclick="salvarPessoasSelecionadas()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
        Salvar
      </button>
    </div>
  </div>
</div>


<!-- Modal Editar Nome - Pessoas -->
<div id="modalEditarNomePessoa" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
    <div class="bg-white p-6 rounded-lg shadow-lg w-80">
        <h2 class="text-xl font-semibold mb-4 text-gray-700">Editar Nome da Lista de Pessoas</h2>
        <input id="inputNovoNomePessoa" type="text" placeholder="Novo nome"
            class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <div class="flex justify-center gap-4">
            <button onclick="fecharModalEditarNomePessoa()" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
            <button onclick="confirmarEditarNomePessoa()" class="px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">Salvar</button>
        </div>
    </div>
</div>


</body>
</html>
